<div class="content-head">
  <button (click)="openDialogchannelInfo()">
    <span id="selected-recipient" class="selectedInterloctor">{{
      selectedRecipient }}</span>
    <div>
      <mat-icon fontIcon="keyboard_arrow_down"></mat-icon>
    </div>
  </button>
  <div class="channel-members" id="channel-members">
    <div *ngFor="let channel of filteredChannelMembers$ | async" class="members">
      <div *ngFor="let avatar of channel.members">
        <img [src]="avatar.avatar" alt>
      </div>
    </div>
    <span>{{length}}</span>
    <div (click)="openDialogAddMembers()">
      <mat-icon fontIcon="group_add"></mat-icon>
    </div>
  </div>
</div>
<div class="content-frame" id="content-frame">
  <!-- Channel -->
  <ng-container *ngIf="showChannelChat">
    <div (mouseenter)="openDialogChannelReaction()" (mouseleave)="closeDialogChannelReaction()">
      <div *ngFor="let chat of chatsChannel$ | async; let i = index; let isFirst = first">
        <!-- Überprüfe, ob das Datum unterschiedlich ist, außer für die erste Nachricht -->
        <div *ngIf="isFirst || isDifferentDate(chat, chatsChannel$[i - 1])" class="day-of-message">
          <div class="line-left"></div>
          <span class="day-frame">{{ isToday(chat.timeStamp) ? 'Heute' : (chat.timeStamp * 1000 | date: 'dd.MM.yyyy') }}</span>
          <div class="line-right"></div>
        </div>
        <div [class.sent-container]="chat.sender === loggedUser.name" [class.recieved-container]="chat.sender !== loggedUser.name">
          <div [class.sent-name-avatar]="chat.sender === loggedUser.name" [class.recieved-name-avatar]="chat.sender !== loggedUser.name">
            <div><span>{{ chat.sender }}</span>
              <div [class.sent-message]="chat.sender === loggedUser.name" [class.recieved-message]="chat.sender !== loggedUser.name">
                <span class="date">{{ chat.timeStamp * 1000 | date: 'dd.MM.yyyy HH:mm' }}</span>
                <span>{{ chat.message }}</span>
                <span (click)="openThread(chat, i)" class="answer">Gib {{ chat.sender }}<span class="element-sender"> </span> eine Antwort</span>
                <div *ngIf="chat.answers.length > 0">
                  <span class="number-answers c-blue" (click)="openThread(chat, i)">{{ chat.answers.length }} Antwort(en)</span>
                </div>
              </div>
            </div>
            <img class="avatar" [src]="chat.avatar">
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <!-- Chats -->
  <ng-container *ngIf="showChat">
    <div *ngFor="let chat of chats$ | async; let i = index">
      <div [class.sent-container]="chat.sender === loggedUser.name"
        [class.recieved-container]="chat.sender !== loggedUser.name">
        <div [class.sent-name-avatar]="chat.sender === loggedUser.name"
          [class.recieved-name-avatar]="chat.sender !== loggedUser.name">
          <div><span>{{ chat.sender }}</span>
            <div [class.sent-message]="chat.sender === loggedUser.name"
              [class.recieved-message]="chat.sender !== loggedUser.name">
              <span class="date">{{ chat.timeStamp * 1000 | date:
                'dd.MM.yyyy HH:mm' }}</span>
              <span>{{ chat.message }}</span>
              <span class="answer">Gib <span class="element-sender"> </span>
                eine Antwort</span>
            </div>
          </div>
          <img class="avatar" src={{chat.avatar}}>
        </div>
      </div>
    </div>
  </ng-container>
</div>
<div class="message-container">
  <div class="message-frame">
    <div class="input-frame">
      <textarea id="textarea" [(ngModel)]="message" placeholder name="Nachricht" cols="37" rows="9"></textarea>
    </div>
    <div class="icon-container">
      <div class="icon-left">
        <div class="icon-div">
          <mat-icon class="mat-icons" fontIcon="add"></mat-icon>
        </div>
        <div (click)="openDialogShowEmojis()" class="icon-div">
          <mat-icon class="mat-icons" fontIcon="sentiment_satisfied"></mat-icon>
        </div>
        <div class="icon-div">
          <mat-icon class="mat-icons" fontIcon="alternate_email"></mat-icon>
        </div>
      </div>
      <div class="icon-right">
        <img (click)="postChat()" class="submit-arrow" src="./assets/img/Send icon.png" alt="submit arrow">
      </div>
    </div>
  </div>
</div>

