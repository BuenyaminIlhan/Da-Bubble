<div class="content-head">
  <button (click)="openDialogchannelInfo()">
    <span id="selected-recipient" class="selectedInterloctor">{{
      selectedRecipient }}</span>
    <div>
      <mat-icon fontIcon="keyboard_arrow_down"></mat-icon>
    </div>
  </button>
  <div class="channel-members" id="channel-members">
    <div *ngFor="let channel of filteredChannelMembers$ | async" class="members">
      <div *ngFor="let avatar of channel.members">
        <img [src]="avatar.avatar" alt>
      </div>
    </div>
    <span>{{length}}</span>
    <div (click)="openDialogAddMembers()">
      <mat-icon fontIcon="group_add"></mat-icon>
    </div>
  </div>
</div>
<div class="content-frame" id="content-frame">
  <!-- Channel -->
  <ng-container *ngIf="showChannelChat">
    <div>
      <div
        *ngFor="let chat of chatsChannel$ | async; let i = index; let isFirst = first">
        <ng-container
          *ngFor="let channelChats of chat.chats">
          <ng-container *ngIf="false || isDifferentDate(channelChats)">
            <div class="day-of-message">
              <div class="line-left"></div>
              <span class="day-frame">{{ formatDate(channelChats.timeStamp) }}</span>
              <div class="line-right"></div>
            </div>
          </ng-container>
          <div [class.sent-container]="channelChats.sender === loggedUser.name"
            [class.recieved-container]="channelChats.sender !== loggedUser.name">
            <div
              [class.sent-name-avatar]="channelChats.sender === loggedUser.name"
              [class.recieved-name-avatar]="channelChats.sender !== loggedUser.name">
              <div><span>{{ channelChats.sender }}</span>
                <div
                  [class.sent-message]="channelChats.sender === loggedUser.name"
                  [class.recieved-message]="channelChats.sender !== loggedUser.name">
                  <span class="date">{{ channelChats.timeStamp * 1000 | date:
                    'HH:mm' }}</span>
                  <span>{{ channelChats.message }}</span>
                  <!-- <span>{{ channelChats.chats }}</span> -->
                  <span (click)="openThread(channelChats)" class="answer">Gib {{
                    channelChats.sender }}<span class="element-sender"> </span>
                    eine Antwort</span>
                </div>
              </div>
              <img class="avatar" [src]="channelChats.avatar">
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </ng-container>

  <!-- Chats -->
  <ng-container *ngIf="showChat">
    <div *ngFor="let chat of chats$ | async; let i = index">
      <div [class.sent-container]="chat.sender === loggedUser.name"
        [class.recieved-container]="chat.sender !== loggedUser.name">
        <div [class.sent-name-avatar]="chat.sender === loggedUser.name"
          [class.recieved-name-avatar]="chat.sender !== loggedUser.name">
          <div><span>{{ chat.sender }}</span>
            <div [class.sent-message]="chat.sender === loggedUser.name"
              [class.recieved-message]="chat.sender !== loggedUser.name">
              <span class="date">{{ chat.timeStamp * 1000 | date:
                'HH:mm' }}</span>
              <span>{{ chat.message }}</span>
              <span class="answer">Gib <span class="element-sender"> </span>
                eine Antwort</span>
            </div>
          </div>
          <img class="avatar" src={{chat.avatar}}>
        </div>
      </div>
    </div>
  </ng-container>
</div>
<div class="message-container">
  <div class="message-frame">
    <div class="input-frame">
      <textarea id="textarea" [(ngModel)]="message" placeholder name="Nachricht"
        cols="37" rows="9"></textarea>
    </div>
    <div class="icon-container">
      <div class="icon-left">
        <div class="icon-div">
          <mat-icon class="mat-icons" fontIcon="add"></mat-icon>
        </div>
        <div (click)="openDialogShowEmojis()" class="icon-div">
          <mat-icon class="mat-icons" fontIcon="sentiment_satisfied"></mat-icon>
        </div>
        <div class="icon-div">
          <mat-icon class="mat-icons" fontIcon="alternate_email"></mat-icon>
        </div>
      </div>
      <div class="icon-right">
        <img (click)="postChat()" class="submit-arrow"
          src="./assets/img/Send icon.png" alt="submit arrow">
      </div>
    </div>
  </div>
</div>
